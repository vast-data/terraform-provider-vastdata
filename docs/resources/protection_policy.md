---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vastdata_protection_policy Resource - terraform-provider-vastdata"
subcategory: ""
description: |-
  
---

# vastdata_protection_policy (Resource)



## Example Usage

```terraform
#Suppose that two providers are defined, each of which represents a cluster: cluster A and cluster B.
#Start with defining replication virtual IP pools for each cluster and setting the clusters to be replication peers.
#Then define a protection policy.
resource "vastdata_vip_pool" "pool1-clusterB" {
  name        = "pool1"
  role        = "REPLICATION"
  subnet_cidr = "24"
  provider    = vastdata.clusterB
  ip_ranges {
    end_ip   = "11.0.0.10"
    start_ip = "11.0.0.10"
  }

}

resource "vastdata_vip_pool" "pool1-clusterA" {
  name        = "pool1"
  role        = "REPLICATION"
  subnet_cidr = "24"
  provider    = vastdata.clusterA
  ip_ranges {
    end_ip   = "12.0.0.10"
    start_ip = "12.0.0.10"
  }

}

resource "vastdata_replication_peers" "clusterA-clusterB-peer" {
  name        = "peer-loop-b"
  leading_vip = vastdata_vip_pool.pool1-clusterB.ip_ranges[0].start_ip
  pool_id     = vastdata_vip_pool.pool1-clusterA.id
  secure_mode = "NONE"
  provider    = vastdata.clusterA
}


resource "vastdata_protection_policy" "protection-policy" {
  provider         = vastdata.clusterA
  name             = "protection-policy-1"
  clone_type       = "NATIVE_REPLICATION"
  indestructible   = "false"
  prefix           = "policy-1"
  target_object_id = vastdata_replication_peers.clusterA-clusterB-peer.id
  frames {
    every       = "1D"
    keep_local  = "2D"
    keep_remote = "3D"
    start_at    = "2023-06-04 09:00:00"
  }


}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `clone_type` (String) (Valid for versions: 5.0.0,5.1.0,5.2.0) The type of replication. Allowed Values are [NATIVE_REPLICATION LOCAL]
- `name` (String) (Valid for versions: 5.0.0,5.1.0,5.2.0) The name of the protection policy.
- `prefix` (String) (Valid for versions: 5.0.0,5.1.0,5.2.0) The prefix to be given to the replicated data.

### Optional

- `frames` (Block List) (Valid for versions: 5.0.0,5.1.0,5.2.0) A list of snapshot schedules. (see [below for nested schema](#nestedblock--frames))
- `indestructible` (Boolean) (Valid for versions: 5.0.0,5.1.0,5.2.0) If true, the snapshot is  indestructable.
- `target_name` (String) (Valid for versions: 5.0.0,5.1.0,5.2.0) The name of the destination peer.
- `target_object_id` (Number) (Valid for versions: 5.0.0,5.1.0,5.2.0) The ID of the destination peer.
- `url` (String) (Valid for versions: 5.0.0,5.1.0,5.2.0) Direct URL of the protection policy.

### Read-Only

- `guid` (String) (Valid for versions: 5.0.0,5.1.0,5.2.0) The unique GUID of the protection policy.
- `id` (String) The ID of this resource.

<a id="nestedblock--frames"></a>
### Nested Schema for `frames`

Optional:

- `every` (String)
- `keep_local` (String)
- `keep_remote` (String)
- `start_at` (String)

## Import

Import is supported using the following syntax:

```shell
terraform import vastdata_protection_policy.example <guid>
terraform import vastdata_protection_policy.example <Name>
```
