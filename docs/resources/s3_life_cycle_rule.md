---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vastdata_s3_life_cycle_rule Resource - vastdata"
subcategory: ""
description: |-
  
---

# vastdata_s3_life_cycle_rule (Resource)



## Example Usage

```terraform
resource "vastdata_s3_life_cycle_rule" "vastdb_s3_lifecycle_rule" {
  name                      = "vastdb_s3_lifecycle_rule"
  max_size                  = 10000000
  min_size                  = 100000
  newer_noncurrent_versions = 3
  prefix                    = "/s3/"
  view_id                   = 2
  expiration_days           = 30
  enabled                   = true
  noncurrent_days           = 20
}

# ---------------------
# Complete examples
# ---------------------


data "vastdata_view_policy" "vastdb_view_policy_s3_default" {
  name = "s3_default_policy"
}

resource "vastdata_view" "vastdb_view" {
  path         = "/vastdb_view/s3"
  bucket       = "vastdb-s3-bucket"
  create_dir   = true
  bucket_owner = "runner"
  policy_id    = data.vastdata_view_policy.vastdb_view_policy_s3_default.id
  protocols    = ["S3"]
}

resource "vastdata_s3_life_cycle_rule" "vastdb_s3_lifecycle_rule" {
  name                      = "vastdb_s3_lifecycle_rule"
  max_size                  = 10000000
  min_size                  = 100000
  newer_noncurrent_versions = 3
  prefix                    = "/s3/"
  view_id                   = vastdata_view.vastdb_view.id
  expiration_days           = 30
  enabled                   = true
  noncurrent_days           = 20
}

# --------------------
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) A name for the rule.
- `view_id` (String) ID of the view on a specific bucket. The rule will apply to objects within that specific bucket.

### Optional

- `abort_mpu_days_after_initiation` (Number)
- `enabled` (Boolean) True by default. Set to false if you do not want lifestyle actions defined in the rule to become effective immediately after the rule is created.
- `expiration_date` (String) Expires current versions of objects on a specified date. Alternatively, specify expiration_days instead, which sets a numner of days after creation to expire current versions of objects. If the date is in the past when set, all qualified objects become immediately eligible for expiration. Note also that the policy continues to apply the rule after the date passes. Specify the date value in the ISO 8601 format without the time part. (YYYY-MM-DD). The time of expiration is always midnight UTC. Do not set expired_obj_delete_marker to true in the same rule. To clean up expired object delete markers before they reach age criteria, create a separate rule with expired_obj_delete_marker set to true.
- `expiration_days` (Number) Expires current versions of objects after a specified number of days counted from object creation. Alternatively, specify expiration_date instead, which sets a date to expire current versions of objects. In a non-versioned bucket, the expiration action results in permanent removal of affected objects. In a versioned bucket, if the current version of an object is not a delete marker, a delete marker is created and becomes the current version, while the existing current version is retained as a non-current version. Versioned objects where the only version is a delete marker are deleted when they meet the age criteria. Do not set expired_obj_delete_marker to true in the same rule. To clean up expired object delete markers before they reach age criteria, create a separate rule with expired_obj_delete_marker set to true. The time of expiration is the next midnight UTC after the number of days following object creation time.
- `expired_obj_delete_marker` (Boolean) Set to true to delete versioned objects where the only version is a delete marker. Do not include in the same rule as expiration_days or expiration_date.
- `max_size` (Number) Maximum object size. Restricts the rule to objects with the specified maximum size.
- `min_size` (Number) Minimum object size. Restricts the rule to objects with the specified minimum size.
- `newer_noncurrent_versions` (Number) A number of newest non-current versions of an object to retain. Specifying this value protects the specified number of non-current versions from being eligible for deletion due to a noncurrent_days setting.
- `noncurrent_days` (Number) A number of days after which to permanently delete non-current versions of objects. The number of days is timed from when the object becomes non-current, which is when a versioned object is deleted or overwritten.
- `object_age_attr` (String) Defines which time to use for expiration. Default - M_TIME.
- `prefix` (String) A path prefix. The rule will be restricted to objects with the specified prefix. If not specified, the rule will apply to all objects in the bucket.

### Read-Only

- `guid` (String)
- `id` (Number) The ID of an S3 Lifecycle rule
- `title` (String)
- `url` (String)
- `view_path` (String) The path of a view, when the rule applies to all objects in a view (bucket)
