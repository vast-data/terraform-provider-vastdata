---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vastdata_protected_path Resource - vastdata"
subcategory: ""
description: |-
  
---

# vastdata_protected_path (Resource)



## Example Usage

```terraform
############################################
# Providers
############################################
# clusterA
provider "vastdata" {
  host            = "v95"
  username        = "admin"
  password        = "123456"
  skip_ssl_verify = true
}

# clusterB
provider "vastdata" {
  alias           = "clusterB"
  host            = "v117"
  username        = "admin"
  password        = "123456"
  skip_ssl_verify = true
}

############################################
# Cluster A: VIP pool (PROTOCOLS), Tenant, View Policy, View
############################################
resource "vastdata_vip_pool" "protocols_pool" {
  name        = "protocols-pool"
  role        = "PROTOCOLS"
  subnet_cidr = "24"
  # Framework expects list-of-tuples form
  ip_ranges = [
    ["11.0.0.70", "11.0.0.80"]
  ]
}

resource "vastdata_tenant" "tenant" {
  name = "tenant1"
}

resource "vastdata_view_policy" "view_policy" {
  name          = "view-policy1"
  vip_pools     = [vastdata_vip_pool.protocols_pool.id]
  tenant_id     = vastdata_tenant.tenant.id
  flavor        = "NFS"
  nfs_no_squash = ["10.0.0.1", "10.0.0.2"]
}

resource "vastdata_view" "view" {
  path       = "/view1"
  policy_id  = vastdata_view_policy.view_policy.id
  tenant_id  = vastdata_tenant.tenant.id
  create_dir = true
}

############################################
# Replication setup (A <-> B)
############################################
resource "vastdata_vip_pool" "replication_poolA" {
  name        = "gateway-1"
  role        = "REPLICATION"
  subnet_cidr = "24"
  ip_ranges   = [["12.0.0.10", "12.0.0.10"]]
}

resource "vastdata_vip_pool" "replication_poolB" {
  provider    = vastdata.clusterB
  name        = "gateway-1"
  role        = "REPLICATION"
  subnet_cidr = "24"
  ip_ranges   = [["11.0.0.10", "11.0.0.10"]]
}

resource "vastdata_replication_peer" "clusterA_clusterB_peer" {
  # Peer is created on clusterA
  name        = "clusterA-clusterB-peer"
  password    = "####Wwww11111"
  leading_vip = vastdata_vip_pool.replication_poolB.start_ip
  pool_id     = vastdata_vip_pool.replication_poolA.id
}

############################################
# Protection policy (Framework-style frames map)
############################################
resource "vastdata_protection_policy" "protection_policy" {
  name             = "protection-policy-1"
  clone_type       = "NATIVE_REPLICATION"
  indestructible   = false
  prefix           = "policy-1"
  target_object_id = vastdata_replication_peer.clusterA_clusterB_peer.id

  frames = [{
    every       = "1D"
    keep_local  = "2D"
    keep_remote = "3D"
    start_at    = "2026-06-04 09:00:00"
  }]
}

############################################
# Cluster B: Tenant
############################################
resource "vastdata_tenant" "tenant_clusterB" {
  provider = vastdata.clusterB
  name     = "tenant2"
}

############################################
# Protected path (cross-cluster)
############################################
resource "vastdata_protected_path" "protected_path_view" {
  name                 = "protected-path-view"
  source_dir           = vastdata_view.view.path
  tenant_id            = vastdata_view.view.tenant_id
  target_exported_dir  = "/view1"
  protection_policy_id = vastdata_protection_policy.protection_policy.id
  remote_tenant_guid   = vastdata_tenant.tenant_clusterB.guid
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String)
- `source_dir` (String) A path on the local cluster to protect. A snapshot of the specified path will be taken periodically on the schedule configured in the specified protection policy.

### Optional

- `capabilities` (String) Indicates if the protected path supports global access streams ("STARED_GLOBAL_NAMESPACE") or async replication streams ("ASYNC_REPLICATION") or a single stream for synchronous replication ("SYNC_REPLICATION") or both global access and async replication ("REPLICATION_AND_GN").
- `enabled` (Boolean) Enables/pauses the protected path
- `lease_expiry_time` (Number) The lease expiry time, in seconds, for a global access protected path. This is the duration for which data that was already requested at the destination path can be read locally from cache without the destination peer requesting it from the source peer. When the lease expires, the cache is invalidated and the next read request for the data is requested again from the source peer.
- `policy_id` (String) Protection policy ID
- `protection_policy_id` (String) Specifies whcih protection policy to use
- `remote_target_id` (Number) Remote target ID for streams with global namespace or synchronous replication capability.
- `remote_tenant_guid` (String) Tenant GUID of the remote peer tenant to which to replicate
- `sync_disconnect_time` (Number) A period of time, in seconds, without communication between sync replication peers, after which the peers are disconnected.
- `sync_interval` (Number) Replication group sync interval
- `target_exported_dir` (String) A path on a remote peer to which to replicate.
- `tenant_id` (String) Tenant ID of the tenant on the local cluster to which the source_dir belongs.

### Read-Only

- `aggr_phys_estimation` (Number) The usable capacity reclaimable by deleting all of its snapshots
- `bucket_name` (String)
- `bw` (Number) Replication Bandwidth
- `estimated_read_only_time` (String)
- `eta` (String)
- `failback_allowed` (String)
- `failover` (Boolean) Trigger failover command
- `failure_reason` (String)
- `guid` (String) guid
- `health` (String)
- `id` (Number) The ID of this resource.
- `inode_count` (String)
- `internal` (Boolean)
- `is_local` (Boolean)
- `last_restore_point_creation_time` (String)
- `last_restore_point_time` (String)
- `last_snapshot_creation_time` (String)
- `last_uploading_restore_point_logical_size` (String)
- `last_uploading_restore_point_physical_size` (String)
- `last_uploading_restore_point_progress` (Number)
- `last_uploading_restore_point_state` (String)
- `logical_size` (Number)
- `peer_cluster_name` (String)
- `peer_connection_state` (String)
- `physical_size` (Number)
- `progress` (String)
- `protection_policy_name` (String) protection policy name
- `remote_tenant_name` (String) remote tenant name
- `replication_policy` (String) replication policy id
- `replication_target_name` (String)
- `restore_task` (String) link to restore task
- `role` (String) current role in the replication
- `role_change_eta_sec` (Number)
- `role_change_progress_promil` (Number)
- `state` (String) state
- `state_description` (String)
- `tenant_name` (String) Local Tenant name
