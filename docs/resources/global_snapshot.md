---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vastdata_global_snapshot Resource - vastdata"
subcategory: ""
description: |-
  
---

# vastdata_global_snapshot (Resource)



## Example Usage

```terraform
########################################
# Providers
########################################

# Cluster A
provider "vastdata" {
  alias           = "clusterA"
  host            = "v95"
  port            = 443
  username        = "admin"
  password        = "123456"
  skip_ssl_verify = true
}

# Cluster B
provider "vastdata" {
  alias           = "clusterB"
  host            = "v117"
  port            = 443
  username        = "admin"
  password        = "123456"
  skip_ssl_verify = true
}

########################################
# VIP Pools
########################################

resource "vastdata_vip_pool" "pool1_clusterA" {
  provider    = vastdata.clusterA
  name        = "gateway-1"
  role        = "REPLICATION"
  subnet_cidr = 24
  ip_ranges   = [["12.0.0.10", "12.0.0.10"]]
}

resource "vastdata_vip_pool" "pool1_clusterB" {
  provider    = vastdata.clusterB
  name        = "gateway-1"
  role        = "REPLICATION"
  subnet_cidr = 24
  ip_ranges   = [["11.0.0.10", "11.0.0.10"]]
}

locals {
  pool1_clusterB_leading_vip = vastdata_vip_pool.pool1_clusterB.ip_ranges[0][0]
}

########################################
# Replication peer (Cluster A -> B)
########################################

resource "vastdata_replication_peer" "clusterA_clusterB_peer" {
  provider    = vastdata.clusterA
  name        = "peer-loop-b"
  leading_vip = local.pool1_clusterB_leading_vip
  pool_id     = vastdata_vip_pool.pool1_clusterA.id
  secure_mode = "NONE"
}

########################################
# Tenant and View on Cluster B
########################################

data "vastdata_view_policy" "view_policyB" {
  provider = vastdata.clusterB
  name     = "default"
}

resource "vastdata_tenant" "tenant1" {
  provider         = vastdata.clusterB
  name             = "tenant1"
  client_ip_ranges = [["192.168.0.100", "192.168.0.200"]]
}

resource "vastdata_view" "view1" {
  provider   = vastdata.clusterB
  path       = "/view1"
  policy_id  = data.vastdata_view_policy.view_policyB.id
  tenant_id  = vastdata_tenant.tenant1.id
  create_dir = true
}

########################################
# Snapshot on Cluster B
########################################

resource "vastdata_snapshot" "snapshot1" {
  provider        = vastdata.clusterB
  name            = "snapshot1"
  path            = "${vastdata_view.view1.path}/"
  tenant_id       = vastdata_tenant.tenant1.id
  indestructible  = false
  expiration_time = "2023-06-20T12:22:32Z"

  lifecycle {
    ignore_changes = [path]
  }
}

########################################
# Global Snapshot from Cluster A
########################################

resource "vastdata_global_snapshot" "gsnap1" {
  provider         = vastdata.clusterA
  name             = "gsnap1"
  enabled          = true
  loanee_root_path = "/gsnap1"

  loanee_tenant_id = 1
  remote_target_id = vastdata_replication_peer.clusterA_clusterB_peer.id

  owner_root_snapshot = {
    name = vastdata_snapshot.snapshot1.name
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `enabled` (Boolean) Enables background sync, in which the snapshot data is copied from the source to the destination after the clone is created. During the copying stage, read requests are directed to the source if the requested data is not yet copied. If false, the snapshot data is not copied to the destination. Requests to read data from the cloned directory continue to read data from the cloned source.
- `guid` (String) Do not specify this parameter.
- `id` (Number) Do not specify this parameter.
- `loanee_root_path` (String) ID of the path you want to clone. Specify only if cloning from a snapshot on the local cluster.
- `loanee_snapshot` (String) Loanee snapshot name
- `loanee_snapshot_id` (Number) ID of local snapshot to clone. Specify only if cloning from a snapshot on the local cluster.
- `loanee_tenant_id` (Number) The target tenant for the clone, on the local cluster.
- `name` (String) A name for the global snap stream.
- `owner_root_snapshot` (Attributes) Details of the remote snapshot to clone. To retrieve details of snapshots per path, call /clusters/list_snapshoted_paths_remote/ and clusters/list_clone_snapshoted_paths_remote/. Specify only if cloning from remote. (see [below for nested schema](#nestedatt--owner_root_snapshot))
- `remote_target` (String) The name of a remote replication peer from which to clone a snapshot. Specify only if cloning from remote.
- `remote_target_id` (Number) The ID of the remote replication peer from which to clone a snapshot. Specify only if cloning from remote.

### Read-Only

- `bw` (Number) BW
- `direction` (String)
- `eta` (String) ETA
- `external_state` (String) Global Snapshot Clone state
- `health` (String)
- `loanee_tenant` (Attributes) (see [below for nested schema](#nestedatt--loanee_tenant))
- `owner_tenant` (Attributes) (see [below for nested schema](#nestedatt--owner_tenant))
- `restore_task` (Number)
- `source_cluster` (String) Source cluster
- `source_path` (String) Source path
- `source_snapshot` (String) Source snapshot
- `state` (String)
- `sync_progress` (Number)
- `target_cluster` (String) Target cluster

<a id="nestedatt--owner_root_snapshot"></a>
### Nested Schema for `owner_root_snapshot`

Optional:

- `clone_id` (Number)
- `name` (String) Name of snapshot
- `parent_handle_ehandle` (String)


<a id="nestedatt--loanee_tenant"></a>
### Nested Schema for `loanee_tenant`

Read-Only:

- `guid` (String) Loanee tenant guid
- `name` (String) Loanee tenant name


<a id="nestedatt--owner_tenant"></a>
### Nested Schema for `owner_tenant`

Read-Only:

- `guid` (String) Owner tenant guid
- `name` (String) Owner tenant name
